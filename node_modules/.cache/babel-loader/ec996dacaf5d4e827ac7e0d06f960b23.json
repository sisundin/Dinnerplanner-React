{"ast":null,"code":"var _jsxFileName = \"/Users/simonsundin/Desktop/KTH/Interaktions_design/tutorialweek4/dinnerplanner/src/search/searchView.js\";\nimport React from 'react';\nimport renderPromise from '../otil/renderPromise.js';\nimport { Link } from 'react-router-dom';\nimport { useHistory } from \"react-router-dom\";\nconst h = React.createElement;\n\nfunction SummaryBtton() {\n  history.push(\"/summary\");\n}\n\nfunction showDetails(id) {\n  const history = useHistory;\n  history.push(\"/details:\" + id);\n}\n\nexport default class SearchView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.props = props;\n    this.state = {\n      guests: this.props.model.getNumberOfGuests()\n    };\n  }\n\n  update() {\n    this.setState({\n      guests: this.props.model.getNumberOfGuests()\n    });\n  }\n\n  componentDidMount() {\n    this.updateSearchResults();\n    this.props.model.addObserver(() => this.update());\n  } // this is called when component is removed from the DOM\n  // good place to remove observer\n\n\n  componentWillUnmount() {\n    this.props.model.removeObserver(this);\n  }\n\n  render() {\n    return h(\"div\", null, h(\"div\", null, h(\"input\", {\n      id: \"searchInput\"\n    }, null), // free text search box\n    h(\"select\", {\n      id: \"selectInput\"\n    }, h(\"option\", {\n      value: \"\"\n    }, \"Choose:\"), // empty first choice\n    // the rest of the SELECT children are generated from an array:\n    [\"starter\", \"main course\", \"dessert\"].map(opt => h(\"option\", {\n      value: opt\n    }, opt))), h(\"button\", {\n      onClick: () => this.updateSearchResults()\n    }, \"Search!\"), // search button\n    React.createElement(Link, {\n      to: \"/summary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"navigationbutton\",\n      onClick: () => {\n        document.getElementById(\"search\").classList.add('hide');\n        document.getElementById(\"summary\").classList.remove('hide');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, \"Summary\"))), //document.getElementById(\"search\").classList.add('hide');\n    //document.getElementById(\"summary\").classList.remove('hide');\n    // end of search box\n    h(\"div\", {\n      id: \"searchresult\"\n    }, null) // empty div for search results\n    ); // initially populate the resultDiv with nice dish images\n  }\n\n  createDishDisplay(dish) {\n    return h(\"span\", {\n      class: \"food\",\n      id: dish.id,\n      onClick: () => {\n        showDetails(dish.id);\n        document.getElementById(\"search\").classList.add('hide');\n        document.getElementById(\"details\").classList.remove('hide'); //this.props.model.getDishDetails(dish.id).then(dish => this.props.model.addToMenu(dish))\n      } //Addbutton\n\n    }, h(\"span\", null, dish.title), h(\"img\", {\n      src: \"https://spoonacular.com/recipeImages/\" + dish.image\n    }, null));\n  }\n\n  updateSearchResults() {\n    renderPromise(this.props.model.searchDishes(document.getElementById(\"selectInput\").value, document.getElementById(\"searchInput\").value), dishes => h(\"div\", null, dishes.map(dish => this.createDishDisplay(dish))), document.getElementById(\"searchresult\"));\n  }\n\n  isDishRepresentation(clickedNode) {\n    if (clickedNode.className.includes(\"food\") === true) {\n      return clickedNode.getAttribute(\"id\");\n    }\n\n    if (clickedNode.parentElement.className.includes(\"food\") === true) {\n      return clickedNode.parentElement.getAttribute(\"id\");\n    } else {\n      return null;\n    }\n  }\n\n}","map":{"version":3,"sources":["/Users/simonsundin/Desktop/KTH/Interaktions_design/tutorialweek4/dinnerplanner/src/search/searchView.js"],"names":["React","renderPromise","Link","useHistory","h","createElement","SummaryBtton","history","push","showDetails","id","SearchView","Component","constructor","props","state","guests","model","getNumberOfGuests","update","setState","componentDidMount","updateSearchResults","addObserver","componentWillUnmount","removeObserver","render","value","map","opt","onClick","document","getElementById","classList","add","remove","createDishDisplay","dish","class","title","src","image","searchDishes","dishes","isDishRepresentation","clickedNode","className","includes","getAttribute","parentElement"],"mappings":"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","sourcesContent":["import React from 'react';\nimport renderPromise from '../otil/renderPromise.js'\nimport {Link} from 'react-router-dom';\nimport { useHistory } from \"react-router-dom\";\nconst h = React.createElement;\n\n\n\nfunction SummaryBtton() {\n  \n  history.push(\"/summary\");\n}\n\n\n  function showDetails(id) {\n    const history = useHistory\n    history.push(\"/details:\" + id);\n  }\n\n\n\nexport default class SearchView extends React.Component{\n    constructor(props){\n        super(props);\n        this.props = props;\n        this.state = { guests: this.props.model.getNumberOfGuests()\n            \n        };\n        \n    }\n\n    update() {\n        this.setState({\n            guests: this.props.model.getNumberOfGuests()\n        })\n      }\n    \n    componentDidMount() {\n        this.updateSearchResults()\n        this.props.model.addObserver(() => this.update());\n      }\n      // this is called when component is removed from the DOM\n      // good place to remove observer\n    componentWillUnmount() {\n        this.props.model.removeObserver(this)\n      }\n\n    render(){\n        \n        return h(\"div\", null,  \n         h(\"div\", null,\n            h(\"input\", {id:\"searchInput\"}, null),// free text search box\n            h(\"select\", {id:\"selectInput\"},  \n            h(\"option\", {value:\"\"}, \"Choose:\"),                             // empty first choice\n            // the rest of the SELECT children are generated from an array:\n            [\"starter\", \"main course\", \"dessert\"].map(opt=> h(\"option\", {value: opt}, opt))\n            ),  \n\n            h(\"button\",{onClick: () => this.updateSearchResults()}, \"Search!\"), // search button\n            \n            <Link to= '/summary'>\n            <button className=\"navigationbutton\" onClick={() =>{ \n                \n                document.getElementById(\"search\").classList.add('hide');\n                document.getElementById(\"summary\").classList.remove('hide');\n                }}>\n            Summary \n            </button>\n            </Link>),\n            //document.getElementById(\"search\").classList.add('hide');\n            //document.getElementById(\"summary\").classList.remove('hide');\n             // end of search box\n            \n            h(\"div\",{id:\"searchresult\"},null) // empty div for search results\n            \n        )\n         // initially populate the resultDiv with nice dish images\n         \n    }\n    \n    \n\n    createDishDisplay(dish){\n        return h(\"span\",{ class:\"food\", id: dish.id, onClick: () => {\n            showDetails(dish.id);\n            document.getElementById(\"search\").classList.add('hide');\n            document.getElementById(\"details\").classList.remove('hide');\n            //this.props.model.getDishDetails(dish.id).then(dish => this.props.model.addToMenu(dish))\n        }//Addbutton\n    }, h(\"span\" ,null, dish.title), h(\"img\", {src: \"https://spoonacular.com/recipeImages/\" + dish.image},null));\n    }\n\n    \n\n    updateSearchResults(){\n        \n        renderPromise( \n            this.props.model.searchDishes(document.getElementById(\"selectInput\").value, document.getElementById(\"searchInput\").value), \n            dishes=> h(\"div\", null, dishes.map(dish => this.createDishDisplay(dish))),\n            document.getElementById(\"searchresult\")\n        )\n\n          \n    } \n    \n    isDishRepresentation(clickedNode){\n        \n        \n        if(clickedNode.className.includes(\"food\") === true) {\n            return clickedNode.getAttribute(\"id\")\n            \n        }\n\n        if( clickedNode.parentElement.className.includes(\"food\") === true){  \n                return clickedNode.parentElement.getAttribute(\"id\")\n        }\n\n        else{\n            \n             return null\n        }\n    \n\n    }\n\n\n}\n\n"]},"metadata":{},"sourceType":"module"}