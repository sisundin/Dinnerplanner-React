{"ast":null,"code":"var _jsxFileName = \"/Users/simonsundin/Desktop/KTH/Interaktions_design/tutorialweek4/dinnerplanner/src/search/searchView.js\";\nimport React from 'react';\nimport RenderPromise from '../otil/renderPromise.js';\nimport { Link } from 'react-router-dom';\nconst h = React.createElement;\nexport default class SearchView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.props = props;\n    this.state = {\n      select: \"\",\n      freetext: \"\"\n    };\n  }\n\n  update() {\n    this.setState({\n      select: document.getElementById(\"selectInput\").value,\n      freetext: document.getElementById(\"searchInput\").value\n    });\n  }\n\n  componentDidMount() {\n    //this.updateSearchResults()\n    this.props.model.addObserver(() => this.update());\n  } // this is called when component is removed from the DOM\n  // good place to remove observer\n\n\n  componentWillUnmount() {\n    this.props.model.removeObserver(this);\n  }\n\n  render() {\n    const dishtypearray = [\"starter\", \"main course\", \"dessert\"];\n    return h(\"div\", null, h(\"div\", null, React.createElement(\"input\", {\n      id: \"searchInput\",\n      value: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }), // free text search box\n    React.createElement(\"select\", {\n      id: \"selectInput\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, \"Choose:\"), dishtypearray.map(opt => h(\"option\", {\n      value: opt\n    }, opt))), h(\"button\", {\n      onClick: () => this.update()\n    }, \"Search!\"), // search button\n    React.createElement(Link, {\n      to: \"/summary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"navigationbutton\",\n      onClick: () => {\n        document.getElementById(\"search\").classList.add('hide');\n        document.getElementById(\"summary\").classList.remove('hide');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, \"Summary\"))), //document.getElementById(\"search\").classList.add('hide');\n    //document.getElementById(\"summary\").classList.remove('hide');\n    // end of search box document.getElementById(\"selectInput\").value document.getElementById(\"searchInput\").value\n    h(\"div\", {\n      id: \"searchresult\"\n    }, // empty div for search results\n    React.createElement(RenderPromise, {\n      promise: this.props.model.searchDishes(this.state.select, \"\") //({data})=>h(\"span\",{}, data)\n      ,\n      renderData: ({\n        data\n      }) => data.map(dish => h(\"span\", {}, this.createDishDisplay(dish))),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }))); // initially populate the resultDiv with nice dish images\n    //dish.extendedIngredients.map(ingredient=> h(\"tr\",null, h(\"td\" ,null, ingredient.name)\n    //(data => {h(\"div\", null, data.map(dish => this.createDishDisplay(dish)))})\n  }\n\n  createDishDisplay(dish) {\n    let dishimage = \"https://spoonacular.com/recipeImages/\" + dish.image;\n    return React.createElement(Link, {\n      to: '/details/' + dish.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"food\",\n      id: dish.id,\n      onClick: () => {\n        document.getElementById(\"search\").classList.add('hide');\n        document.getElementById(\"details\").classList.remove('hide');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, dish.title), React.createElement(\"img\", {\n      src: dishimage,\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    })));\n  }\n\n  isDishRepresentation(clickedNode) {\n    if (clickedNode.className.includes(\"food\") === true) {\n      return clickedNode.getAttribute(\"id\");\n    }\n\n    if (clickedNode.parentElement.className.includes(\"food\") === true) {\n      return clickedNode.parentElement.getAttribute(\"id\");\n    } else {\n      return null;\n    }\n  }\n\n}","map":{"version":3,"sources":["/Users/simonsundin/Desktop/KTH/Interaktions_design/tutorialweek4/dinnerplanner/src/search/searchView.js"],"names":["React","RenderPromise","Link","h","createElement","SearchView","Component","constructor","props","state","select","freetext","update","setState","document","getElementById","value","componentDidMount","model","addObserver","componentWillUnmount","removeObserver","render","dishtypearray","map","opt","onClick","classList","add","remove","id","searchDishes","data","dish","createDishDisplay","dishimage","image","title","isDishRepresentation","clickedNode","className","includes","getAttribute","parentElement"],"mappings":"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","sourcesContent":["import React from 'react';\nimport RenderPromise from '../otil/renderPromise.js'\nimport {Link} from 'react-router-dom';\n\n\n\nconst h = React.createElement;\n\n\nexport default class SearchView extends React.Component{\n    constructor(props){\n        super(props);\n        this.props = props;\n        this.state = {\n            select:\"\",\n            freetext:\"\"\n            \n        };\n        \n    }\n\n    update() {\n        this.setState({\n            select: document.getElementById(\"selectInput\").value,\n            freetext:document.getElementById(\"searchInput\").value\n        })\n      }\n    \n    componentDidMount() {\n        //this.updateSearchResults()\n        this.props.model.addObserver(() => this.update());\n      }\n      // this is called when component is removed from the DOM\n      // good place to remove observer\n    componentWillUnmount() {\n        this.props.model.removeObserver(this)\n      }\n      \n    render(){\n        const dishtypearray = [\"starter\", \"main course\", \"dessert\"];\n        return h(\"div\", null,  \n         h(\"div\", null,\n            <input id=\"searchInput\" value=\"\"/>  ,// free text search box\n            <select id = 'selectInput'>\n                <option value=\"\">Choose:</option>\n                {dishtypearray.map(opt => h(\"option\", {value: opt}, opt))}\n                </select> \n            ,  \n\n            h(\"button\",{onClick: () => this.update()}, \"Search!\"), // search button\n            \n            <Link to= '/summary'>\n            <button className=\"navigationbutton\" onClick={() =>{ \n                document.getElementById(\"search\").classList.add('hide');\n                document.getElementById(\"summary\").classList.remove('hide');\n                }}>\n            Summary \n            </button>\n        \n            </Link>),\n            //document.getElementById(\"search\").classList.add('hide');\n            //document.getElementById(\"summary\").classList.remove('hide');\n             // end of search box document.getElementById(\"selectInput\").value document.getElementById(\"searchInput\").value\n            \n            h(\"div\",{id:\"searchresult\" }, // empty div for search results\n            <RenderPromise \n\n            promise =  {this.props.model.searchDishes( this.state.select, \"\" ) }  //({data})=>h(\"span\",{}, data)\n            renderData = { ({data}) =>  data.map(dish => h(\"span\", {} , this.createDishDisplay(dish)))}\n                        />\n        ))\n         // initially populate the resultDiv with nice dish images\n         //dish.extendedIngredients.map(ingredient=> h(\"tr\",null, h(\"td\" ,null, ingredient.name)\n\n         //(data => {h(\"div\", null, data.map(dish => this.createDishDisplay(dish)))})\n    }\n    \n    createDishDisplay(dish){\n    let dishimage = \"https://spoonacular.com/recipeImages/\"+ dish.image;\n    \n      return <Link to= {'/details/' + dish.id}>\n        <span className= \"food\" id= {dish.id} onClick = {() => {\n            document.getElementById(\"search\").classList.add('hide');\n            document.getElementById(\"details\").classList.remove('hide');\n            }}>\n        <span>{dish.title}</span>\n        <img src = {dishimage} alt = \"\"></img>\n        </span>           \n        </Link>\n        \n    }\n    \n    \n    isDishRepresentation(clickedNode){\n        \n        \n        if(clickedNode.className.includes(\"food\") === true) {\n            return clickedNode.getAttribute(\"id\")\n            \n        }\n\n        if( clickedNode.parentElement.className.includes(\"food\") === true){  \n                return clickedNode.parentElement.getAttribute(\"id\")\n        }\n\n        else{\n            \n             return null\n        }\n    \n\n    }\n\n\n}\n\n"]},"metadata":{},"sourceType":"module"}