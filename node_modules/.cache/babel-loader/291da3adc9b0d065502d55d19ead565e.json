{"ast":null,"code":"import React from 'react';\nimport renderPromise from '../otil/renderPromise.js';\nconst h = React.createElement;\nexport default class SearchView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.props = props;\n    this.state = {};\n  }\n\n  update() {\n    this.setState({});\n  }\n\n  componentDidMount() {\n    this.props.model.addObserver(() => this.update());\n  } // this is called when component is removed from the DOM\n  // good place to remove observer\n\n\n  componentWillUnmount() {\n    this.props.model.removeObserver(this);\n  }\n\n  render() {\n    return h(\"div\", null, h(\"div\", null, this.textControl = h(\"input\"), // free text search box\n    this.typeControl = h(\"select\", null, h(\"option\", {\n      value: \"\"\n    }, \"Choose:\"), // empty first choice\n    // the rest of the SELECT children are generated from an array:\n    [\"starter\", \"main course\", \"dessert\"].map(opt => h(\"option\", opt))), h(\"button\", {\n      onClick: () => this.updateSearchResults()\n    }, \"Search!\"), // search button\n    h(\"button\", {\n      class: \"navigationbutton\",\n      onClick: () => console.log(\"du försökte byta något\")\n    }, \"Summary\")), // end of search box\n    this.resultDiv = h(\"div\", null) // empty div for search results\n    ); // initially populate the resultDiv with nice dish images\n  }\n\n  createDishDisplay(dish) {\n    return h(\"span\", {\n      class: \"food\",\n      id: dish.id,\n      title: dish.title\n    }, h(\"span\", null, dish.title), h(\"img\", {\n      src: \"https://spoonacular.com/recipeImages/\" + dish.image\n    }, null));\n  }\n\n  updateSearchResults() {\n    renderPromise(this.props.model.searchDishes(this.typeControl.value, this.textControl.value), dishes => h(\"div\", null, dishes.map(dish => this.model.createDishDisplay(dish))), this.resultDiv);\n  }\n\n  isDishRepresentation(clickedNode) {\n    if (clickedNode.className.includes(\"food\") === true) {\n      return clickedNode.getAttribute(\"id\");\n    }\n\n    if (clickedNode.parentElement.className.includes(\"food\") === true) {\n      return clickedNode.parentElement.getAttribute(\"id\");\n    } else {\n      return null;\n    }\n  }\n\n}","map":{"version":3,"sources":["/Users/simonsundin/Desktop/KTH/Interaktions_design/tutorialweek4/dinnerplanner/src/search/searchView.js"],"names":["React","renderPromise","h","createElement","SearchView","Component","constructor","props","state","update","setState","componentDidMount","model","addObserver","componentWillUnmount","removeObserver","render","textControl","typeControl","value","map","opt","onClick","updateSearchResults","class","console","log","resultDiv","createDishDisplay","dish","id","title","src","image","searchDishes","dishes","isDishRepresentation","clickedNode","className","includes","getAttribute","parentElement"],"mappings":"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","sourcesContent":["import React from 'react';\nimport renderPromise from '../otil/renderPromise.js'\nconst h = React.createElement;\n\n\n\nexport default class SearchView extends React.Component{\n    constructor(props){\n        super(props);\n        this.props = props;\n        this.state = {\n\n        };\n    }\n\n    update() {\n        this.setState({\n          \n        })\n      }\n    componentDidMount() {\n        this.props.model.addObserver(() => this.update());\n      }\n      // this is called when component is removed from the DOM\n      // good place to remove observer\n      componentWillUnmount() {\n        this.props.model.removeObserver(this)\n      }\n\n    render(){\n        \n        return h(\"div\", null,  \n         h(\"div\", null,\n            this.textControl= h(\"input\"), // free text search box\n            this.typeControl= h(\"select\", null,  \n            h(\"option\", {value:\"\"}, \"Choose:\"),                             // empty first choice\n            // the rest of the SELECT children are generated from an array:\n            [\"starter\", \"main course\", \"dessert\"].map(opt=> h(\"option\", opt))\n            ),  \n\n            h(\"button\",{onClick: () => this.updateSearchResults()}, \"Search!\"), // search button\n            \n            h(\"button\",{class:\"navigationbutton\", onClick:() => console.log(\"du försökte byta något\")}, \"Summary\" )), // end of search box\n            \n        this.resultDiv= h(\"div\",null) // empty div for search results\n        \n        )\n\n        \n         // initially populate the resultDiv with nice dish images\n         \n    }\n    \n    \n\n    createDishDisplay(dish){\n        return h(\"span\",{ class:\"food\", id: dish.id, title: dish.title }, h(\"span\" ,null, dish.title), h(\"img\", {src: \"https://spoonacular.com/recipeImages/\" + dish.image},null));\n    }\n\n    updateSearchResults(){\n        renderPromise( \n            this.props.model.searchDishes(this.typeControl.value, this.textControl.value), \n            dishes=> h(\"div\", null, dishes.map(dish => this.model.createDishDisplay(dish))),\n            this.resultDiv\n        )\n\n          \n    } \n    \n    isDishRepresentation(clickedNode){\n        \n        \n        if(clickedNode.className.includes(\"food\") === true) {\n            return clickedNode.getAttribute(\"id\")\n            \n        }\n\n        if( clickedNode.parentElement.className.includes(\"food\") === true){  \n                return clickedNode.parentElement.getAttribute(\"id\")\n        }\n\n        else{\n            \n             return null\n        }\n    \n\n    }\n\n\n}\n\n"]},"metadata":{},"sourceType":"module"}