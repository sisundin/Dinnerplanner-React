{"ast":null,"code":"// js/summary/summaryView.js\nclass SidebarView {\n  constructor(model, root, onDeleteClicked, changeInteger) {\n    this.root = root;\n    this.model = model;\n    model.addObserver(x => this.update(x));\n    this.menuprice = 0;\n    this.dishtypesort = {\n      \"starter\": 1,\n      \"main course\": 2,\n      \"dessert\": 3\n    };\n    this.onDeleteClicked = onDeleteClicked;\n    this.changeInteger = changeInteger;\n  }\n\n  render() {\n    this.menuprice = 0;\n    localStorage.setItem(\"dinnerModel\", JSON.stringify({\n      guests: model.getNumberOfGuests(),\n      dishes: model.getMenu()\n    }));\n    h(\"div\", h(\"button\", {\n      onClick: e => this.changeInteger(-1)\n    }, \"-\"), h(\"span\", model.getNumberOfGuests()), h(\"button\", {\n      onClick: e => this.changeInteger(1)\n    }, \"+\"), h(\"table\", h(\"th\", h(\"td\", \"Dish name\"), h(\"td\", \"Dish price (SEK)\")), model.getMenu().sort(function (a, b) {\n      if (a.dishTypes.includes(\"starter\")) {\n        return -1;\n      } else if (a.dishTypes.includes(\"main course\") && b.dishTypes.includes(\"dessert\")) {\n        return -1;\n      } else if (a.dishTypes.includes(\"dessert\")) {\n        return 1;\n      }\n    }).map(dish => h(\"tr\", h(\"td\", dish.title), h(\"td\", this.getdishprice(dish)), h(\"button\", {\n      onClick: event => {\n        this.onDeleteClicked(dish.id);\n      },\n      id: dish.id\n    }, \"delete\"))), h(\"tr\", h(\"td\", \"Total dinner price: \"), h(\"td\", this.menuprice)))).render(this.root);\n  }\n\n  update(whatHappened) {\n    if (whatHappened.guests !== undefined) {\n      this.root.firstElementChild.firstElementChild.nextElementSibling.textContent = whatHappened.guests;\n    } else {\n      this.render(this.root);\n    }\n  }\n\n  getdishprice(dish) {\n    this.dishprice = sum(dish.extendedIngredients) * this.model.getNumberOfGuests();\n    this.menuprice = this.menuprice + this.dishprice;\n    return this.dishprice;\n  }\n\n}\n\nfunction sum(input) {\n  if (toString.call(input) !== \"[object Array]\") return false;\n  var total = 0;\n\n  for (var i = 0; i < input.length; i++) {\n    if (isNaN(input[i].amount)) {\n      continue;\n    }\n\n    total += Number(input[i].amount);\n  }\n\n  return total;\n}","map":{"version":3,"sources":["C:/Users/johne/Desktop/IPROG/tutorialweek4/dinnerplanner/dinnerplanner/src/sidebar/sidebarView.js"],"names":["SidebarView","constructor","model","root","onDeleteClicked","changeInteger","addObserver","x","update","menuprice","dishtypesort","render","localStorage","setItem","JSON","stringify","guests","getNumberOfGuests","dishes","getMenu","h","onClick","e","sort","a","b","dishTypes","includes","map","dish","title","getdishprice","event","id","whatHappened","undefined","firstElementChild","nextElementSibling","textContent","dishprice","sum","extendedIngredients","input","toString","call","total","i","length","isNaN","amount","Number"],"mappings":"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","sourcesContent":["// js/summary/summaryView.js\r\nclass SidebarView{\r\n    constructor(model, root, onDeleteClicked,changeInteger){\r\n        this.root=root;\r\n        this.model=model;\r\n        model.addObserver(x=>this.update(x));\r\n        this.menuprice = 0;\r\n        this.dishtypesort= {\"starter\": 1 , \"main course\" : 2 , \"dessert\": 3 };\r\n        this.onDeleteClicked= onDeleteClicked;\r\n        this.changeInteger = changeInteger;\r\n    }\r\n    render(){\r\n        this.menuprice = 0;\r\n        localStorage.setItem(\"dinnerModel\", JSON.stringify({guests: model.getNumberOfGuests(), dishes: model.getMenu()}))\r\n        h(\"div\", h(\"button\", {onClick: e=> this.changeInteger(-1)}, \"-\"), h(\"span\", model.getNumberOfGuests()), h(\"button\", {onClick: e=> this.changeInteger(1)}, \"+\"),\r\n        h(\"table\", \r\n        h(\"th\" , h(\"td\", \"Dish name\"), h(\"td\", \"Dish price (SEK)\")),\r\n            model.getMenu().sort(function(a, b){\r\n            if(a.dishTypes.includes(\"starter\")){return -1} \r\n            else if(a.dishTypes.includes(\"main course\") && b.dishTypes.includes(\"dessert\")){return -1} \r\n            else if(a.dishTypes.includes(\"dessert\")){return 1}}\r\n            ).map(dish=> h(\"tr\", h(\"td\" , dish.title ), h(\"td\",  this.getdishprice(dish)),h(\"button\",{ onClick: event => {this.onDeleteClicked( dish.id)} , id: dish.id}, \"delete\"))),\r\n        h(\"tr\", h(\"td\", \"Total dinner price: \"), h(\"td\", this.menuprice))\r\n        \r\n\r\n        \r\n        )).render(this.root)\r\n        \r\n    }\r\n    update(whatHappened){\r\n        if(whatHappened.guests !== undefined){\r\n            this.root.firstElementChild.firstElementChild.nextElementSibling.textContent= whatHappened.guests;\r\n        }\r\n        else{\r\n            this.render(this.root)\r\n        }\r\n    }\r\n\r\n    getdishprice(dish){\r\n        this.dishprice = sum(dish.extendedIngredients) * this.model.getNumberOfGuests();\r\n        this.menuprice = this.menuprice + this.dishprice;\r\n        return this.dishprice\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction sum(input){\r\n             \r\n    if (toString.call(input) !== \"[object Array]\")\r\n       return false;\r\n         \r\n               var total =  0;\r\n               for(var i=0;i<input.length;i++)\r\n                 {                  \r\n                   if(isNaN(input[i].amount)){\r\n                   continue;\r\n                    }\r\n                     total += Number(input[i].amount);\r\n                  }\r\n                return total;\r\n               }"]},"metadata":{},"sourceType":"module"}