{"ast":null,"code":"import React from 'react';\nimport renderPromise from '../otil/renderPromise.js';\nimport DishDetailsView from './detailsView';\nconst h = React.createElement;\nexport default class DishDetailsContainer extends React.Component {\n  constructor(props) {\n    this.props = props;\n    this.root = root;\n    this.onAdd = onAdd;\n    this.onAddCallback = onAdd[0];\n    this.onAddLabel = onAdd[1];\n    this.onCancelCallback = onCancel[0];\n    this.onCancelLabel = onCancel[1];\n    this.currentDish = \"\";\n    model.addObserver(() => this.currentDish ? this.createDishDisplay(this.currentDish).render(root) : null);\n  }\n\n  update() {\n    this.setState({\n      numberOfGuests: this.props.model.getNumberOfGuests(),\n      getMenu: this.props.model.getMenu()\n    });\n  }\n\n  componentDidMount() {\n    this.props.model.addObserver(() => this.update());\n  } // this is called when component is removed from the DOM\n  // good place to remove observer\n\n\n  componentWillUnmount() {\n    this.props.model.removeObserver(this);\n  }\n\n  createDishDisplay(dish) {\n    return h(DishDetailsView({\n      dish: dish,\n      addControl: [() => {\n        this.props.model.addToMenu(dish);\n        this.onAddCallback();\n      }, this.onAddLabel],\n      onCancel: [() => {\n        this.onCancelCallback();\n      }, this.onCancelLable],\n      price: this.props.model.getDishPrice(dish),\n      guests: this.props.model.getNumberOfGuests(),\n      inMenu: this.props.model.dishInMenu(dish)\n    }));\n  }\n\n  render(id) {\n    renderPromise(this.model.getDishDetails(id), dish => {\n      return this.currentDish = dish, this.createDishDisplay(this.currentDish);\n    }, this.root);\n  }\n\n}","map":{"version":3,"sources":["/Users/simonsundin/Desktop/KTH/Interaktions_design/tutorialweek4/dinnerplanner/src/details/detailsContainer.js"],"names":["React","renderPromise","DishDetailsView","h","createElement","DishDetailsContainer","Component","constructor","props","root","onAdd","onAddCallback","onAddLabel","onCancelCallback","onCancel","onCancelLabel","currentDish","model","addObserver","createDishDisplay","render","update","setState","numberOfGuests","getNumberOfGuests","getMenu","componentDidMount","componentWillUnmount","removeObserver","dish","addControl","addToMenu","onCancelLable","price","getDishPrice","guests","inMenu","dishInMenu","id","getDishDetails"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,aAAP,MAA0B,0BAA1B;AACA,OAAOC,eAAP,MAA4B,eAA5B;AACA,MAAMC,CAAC,GAAGH,KAAK,CAACI,aAAhB;AAGA,eAAe,MAAMC,oBAAN,SAAmCL,KAAK,CAACM,SAAzC,CAAkD;AAC7DC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACnB,SAAKA,KAAL,GAAaA,KAAb;AACA,SAAKC,IAAL,GAAYA,IAAZ;AACA,SAAKC,KAAL,GAAaA,KAAb;AACA,SAAKC,aAAL,GAAqBD,KAAK,CAAC,CAAD,CAA1B;AACA,SAAKE,UAAL,GAAkBF,KAAK,CAAC,CAAD,CAAvB;AACA,SAAKG,gBAAL,GAAsBC,QAAQ,CAAC,CAAD,CAA9B;AACA,SAAKC,aAAL,GAAmBD,QAAQ,CAAC,CAAD,CAA3B;AACA,SAAKE,WAAL,GAAmB,EAAnB;AACAC,IAAAA,KAAK,CAACC,WAAN,CAAkB,MAAK,KAAKF,WAAL,GAAiB,KAAKG,iBAAL,CAAuB,KAAKH,WAA5B,EAAyCI,MAAzC,CAAgDX,IAAhD,CAAjB,GAAuE,IAA9F;AACA;;AAEDY,EAAAA,MAAM,GAAG;AAEJ,SAAKC,QAAL,CAAc;AACZC,MAAAA,cAAc,EAAE,KAAKf,KAAL,CAAWS,KAAX,CAAiBO,iBAAjB,EADJ;AAEZC,MAAAA,OAAO,EAAE,KAAKjB,KAAL,CAAWS,KAAX,CAAiBQ,OAAjB;AAFG,KAAd;AAID;;AAGHC,EAAAA,iBAAiB,GAAG;AAChB,SAAKlB,KAAL,CAAWS,KAAX,CAAiBC,WAAjB,CAA6B,MAAM,KAAKG,MAAL,EAAnC;AACD,GAxB0D,CA0B3D;AACA;;;AACAM,EAAAA,oBAAoB,GAAG;AACrB,SAAKnB,KAAL,CAAWS,KAAX,CAAiBW,cAAjB,CAAgC,IAAhC;AACD;;AAEHT,EAAAA,iBAAiB,CAACU,IAAD,EAAM;AACf,WAAO1B,CAAC,CAACD,eAAe,CAAE;AACtB2B,MAAAA,IAAI,EAAEA,IADgB;AAEtBC,MAAAA,UAAU,EAAE,CAAE,MAAI;AAAE,aAAKtB,KAAL,CAAWS,KAAX,CAAiBc,SAAjB,CAA2BF,IAA3B;AACA,aAAKlB,aAAL;AACP,OAFD,EAEG,KAAKC,UAFR,CAFU;AAKtBE,MAAAA,QAAQ,EAAE,CAAE,MAAI;AACI,aAAKD,gBAAL;AACP,OAFH,EAEK,KAAKmB,aAFV,CALY;AAQtBC,MAAAA,KAAK,EAAE,KAAKzB,KAAL,CAAWS,KAAX,CAAiBiB,YAAjB,CAA8BL,IAA9B,CARe;AAStBM,MAAAA,MAAM,EAAE,KAAK3B,KAAL,CAAWS,KAAX,CAAiBO,iBAAjB,EATc;AAUtBY,MAAAA,MAAM,EAAE,KAAK5B,KAAL,CAAWS,KAAX,CAAiBoB,UAAjB,CAA4BR,IAA5B;AAVc,KAAF,CAAhB,CAAR;AAWH;;AAGNT,EAAAA,MAAM,CAACkB,EAAD,EAAI;AACRrC,IAAAA,aAAa,CAAC,KAAKgB,KAAL,CAAWsB,cAAX,CAA0BD,EAA1B,CAAD,EACPT,IAAI,IAAI;AAAE,aAAO,KAAKb,WAAL,GAAmBa,IAAnB,EAAyB,KAAKV,iBAAL,CAAuB,KAAKH,WAA5B,CAAhC;AAA0E,KAD7E,EAEP,KAAKP,IAFE,CAAb;AAGF;;AAnD8D","sourcesContent":["import React from 'react';\r\nimport renderPromise from '../otil/renderPromise.js'\r\nimport DishDetailsView from './detailsView';\r\nconst h = React.createElement;\r\n\r\n\r\nexport default class DishDetailsContainer extends React.Component{\r\n    constructor(props ){ \r\n    this.props = props;\r\n    this.root = root;\r\n    this.onAdd = onAdd;\r\n    this.onAddCallback = onAdd[0];\r\n    this.onAddLabel = onAdd[1];\r\n    this.onCancelCallback=onCancel[0];\r\n    this.onCancelLabel=onCancel[1];\r\n    this.currentDish = \"\";\r\n    model.addObserver(()=> this.currentDish?this.createDishDisplay(this.currentDish).render(root):null); \r\n   }\r\n   \r\n   update() {\r\n        \r\n        this.setState({\r\n          numberOfGuests: this.props.model.getNumberOfGuests(),\r\n          getMenu: this.props.model.getMenu()\r\n        })\r\n      }\r\n    \r\n\r\n    componentDidMount() {\r\n        this.props.model.addObserver(() => this.update());\r\n      }\r\n    \r\n      // this is called when component is removed from the DOM\r\n      // good place to remove observer\r\n      componentWillUnmount() {\r\n        this.props.model.removeObserver(this)\r\n      }\r\n\r\n    createDishDisplay(dish){ \r\n            return h(DishDetailsView( { \r\n                dish: dish, \r\n                addControl: [ ()=>{ this.props.model.addToMenu(dish)\r\n                                    this.onAddCallback()\r\n                            }, this.onAddLabel],\r\n                onCancel: [ ()=>{   \r\n                                    this.onCancelCallback()\r\n                            }, this.onCancelLable],\r\n                price: this.props.model.getDishPrice(dish),\r\n                guests: this.props.model.getNumberOfGuests(),\r\n                inMenu: this.props.model.dishInMenu(dish)}));\r\n        }\r\n\r\n\r\n   render(id){  \r\n     renderPromise(this.model.getDishDetails(id), \r\n           dish => { return this.currentDish = dish, this.createDishDisplay(this.currentDish);},\r\n           this.root)\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}