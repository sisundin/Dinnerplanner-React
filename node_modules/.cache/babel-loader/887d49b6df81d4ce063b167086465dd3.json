{"ast":null,"code":"var _jsxFileName = \"/Users/simonsundin/Desktop/KTH/Interaktions_design/tutorialweek4/dinnerplanner/src/sidebar/sidebarView.js\";\n// js/summary/summaryView.js\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nconst h = React.createElement;\nexport default class SidebarView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.props = props; // we put on state the properties we want to use and modify in the component\n\n    this.state = {};\n    this.menuprice = 0;\n    this.dishtypesort = {\n      \"starter\": 1,\n      \"main course\": 2,\n      \"dessert\": 3\n    };\n  }\n\n  add(value) {\n    if (value === -1 && this.props.model.getNumberOfGuests() === 1) {} else {\n      this.props.model.setNumberOfGuests(this.props.model.getNumberOfGuests() + value);\n    }\n  }\n\n  removeDish(id) {\n    this.props.model.removeFromMenu(id);\n  }\n\n  update() {\n    this.setState({});\n  }\n\n  componentDidMount() {\n    this.props.model.addObserver(() => this.update());\n  } // this is called when component is removed from the DOM\n  // good place to remove observer\n\n\n  componentWillUnmount() {\n    this.props.model.removeObserver(this);\n  }\n\n  render() {\n    localStorage.setItem(\"dinnerModel\", JSON.stringify({\n      guests: this.props.model.getNumberOfGuests(),\n      dishes: this.props.model.getMenu()\n    }));\n    this.menuprice = 0;\n    return h(\"div\", {}, React.createElement(Link, {\n      to: \"/search\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      onLoad: () => {},\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    })), h(\"button\", {\n      onClick: () => this.add(-1)\n    }, \"-\"), h(\"span\", {}, this.props.model.getNumberOfGuests()), h(\"button\", {\n      onClick: () => this.add(1)\n    }, \"+\"), h(\"div\", {}, h(\"table\", {}, h(\"tr\", {}, h(\"th\", {}, \"Dish name\"), h(\"th\", {}, \"Dish price (SEK)\")), this.props.model.getMenu().sort(function (a, b) {\n      if (a.dishTypes.includes(\"starter\")) {\n        return -1;\n      } else if (a.dishTypes.includes(\"main course\") && b.dishTypes.includes(\"dessert\")) {\n        return -1;\n      } else if (a.dishTypes.includes(\"dessert\")) {\n        return 1;\n      }\n\n      return {};\n    }).map(dish => h(\"tr\", {}, React.createElement(Link, {\n      to: '/details/' + dish.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      onClick: () => {\n        document.getElementById(\"search\").classList.add('hide');\n        document.getElementById(\"details\").classList.remove('hide');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \" \", dish.title, \" \"), \" \"), h(\"td\", {}, this.getdishprice(dish)), h(\"button\", {\n      onClick: () => {\n        this.removeDish(dish.id);\n      }\n    }, \"delete\"))), h(\"tr\", {}, h(\"td\", {}, \"Total dinner price: \"), h(\"td\", {}, this.menuprice)))));\n  }\n\n  getdishprice(dish) {\n    this.dishprice = sum(dish.extendedIngredients) * this.props.model.getNumberOfGuests();\n    this.menuprice = this.menuprice + this.dishprice;\n    return this.dishprice;\n  }\n\n}\n\nfunction sum(input) {\n  if (toString.call(input) !== \"[object Array]\") return false;\n  var total = 0;\n\n  for (var i = 0; i < input.length; i++) {\n    if (isNaN(input[i].amount)) {\n      continue;\n    }\n\n    total += Number(input[i].amount);\n  }\n\n  return total;\n}","map":{"version":3,"sources":["/Users/simonsundin/Desktop/KTH/Interaktions_design/tutorialweek4/dinnerplanner/src/sidebar/sidebarView.js"],"names":["React","Link","h","createElement","SidebarView","Component","constructor","props","state","menuprice","dishtypesort","add","value","model","getNumberOfGuests","setNumberOfGuests","removeDish","id","removeFromMenu","update","setState","componentDidMount","addObserver","componentWillUnmount","removeObserver","render","localStorage","setItem","JSON","stringify","guests","dishes","getMenu","onClick","sort","a","b","dishTypes","includes","map","dish","document","getElementById","classList","remove","title","getdishprice","dishprice","sum","extendedIngredients","input","toString","call","total","i","length","isNaN","amount","Number"],"mappings":"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","sourcesContent":["// js/summary/summaryView.js\r\nimport React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nconst h = React.createElement;\r\n\r\n\r\nexport default class SidebarView extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.props = props;\r\n        // we put on state the properties we want to use and modify in the component\r\n        this.state = {\r\n            \r\n        };\r\n        this.menuprice = 0;\r\n        this.dishtypesort= {\"starter\": 1 , \"main course\" : 2 , \"dessert\": 3 };\r\n        \r\n        }\r\n\r\n\r\n    add(value){\r\n      if (value === -1 && this.props.model.getNumberOfGuests() === 1){\r\n        \r\n       }\r\n      else{\r\n        this.props.model.setNumberOfGuests(this.props.model.getNumberOfGuests()+value)\r\n      }}\r\n\r\n    removeDish(id){\r\n      this.props.model.removeFromMenu(id)\r\n    }\r\n    \r\n    \r\n    update() {\r\n        \r\n        this.setState({\r\n          \r\n        })\r\n      }\r\n    \r\n\r\n    componentDidMount() {\r\n        this.props.model.addObserver(() => this.update());\r\n      }\r\n    \r\n      // this is called when component is removed from the DOM\r\n      // good place to remove observer\r\n      componentWillUnmount() {\r\n        this.props.model.removeObserver(this)\r\n      }\r\n    \r\n\r\n\r\n\r\n    render(){\r\n        localStorage.setItem(\"dinnerModel\", \r\n        JSON.stringify({guests: this.props.model.getNumberOfGuests(), dishes: this.props.model.getMenu()}))\r\n\r\n        this.menuprice = 0;\r\n        return h(\"div\",{}, <Link to= '/search' ><div onLoad={()=>{}}></div></Link>,\r\n        h(\"button\", {onClick: () => this.add(-1)}, \"-\"),\r\n        h(\"span\", {}, this.props.model.getNumberOfGuests()),\r\n        h(\"button\", {onClick: () => this.add(1)}, \"+\"),\r\n        h(\"div\",{},\r\n        h(\"table\", {},\r\n        h(\"tr\" ,{}, h(\"th\",{}, \"Dish name\"), h(\"th\", {},\"Dish price (SEK)\")),\r\n            this.props.model.getMenu().sort( function(a, b){\r\n            if(a.dishTypes.includes(\"starter\")){return -1}\r\n            else if(a.dishTypes.includes(\"main course\") && b.dishTypes.includes(\"dessert\")){return -1}\r\n            else if(a.dishTypes.includes(\"dessert\")){return 1}\r\n            return {}} \r\n            ).map(dish=> h(\"tr\",{}, \r\n            <Link to= {'/details/' + dish.id}> \r\n            <td  onClick={()=> {\r\n              document.getElementById(\"search\").classList.add('hide');\r\n            document.getElementById(\"details\").classList.remove('hide');\r\n\r\n            }}> {dish.title} </td> </Link>, h(\"td\",{},  this.getdishprice(dish)), h(\"button\",{onClick: () => {this.removeDish(dish.id)}}, \"delete\"))),\r\n        h(\"tr\",{}, h(\"td\",{}, \"Total dinner price: \"), h(\"td\", {}, this.menuprice))\r\n        )));\r\n        \r\n    }\r\n\r\n\r\n\r\n    getdishprice(dish){\r\n        this.dishprice = sum(dish.extendedIngredients) * this.props.model.getNumberOfGuests();\r\n        this.menuprice = this.menuprice + this.dishprice;\r\n        return this.dishprice\r\n    }\r\n\r\n}\r\n\r\nfunction sum(input){\r\n             \r\n    if (toString.call(input) !== \"[object Array]\")\r\n       return false;\r\n         \r\n               var total =  0;\r\n               for(var i=0;i<input.length;i++)\r\n                 {                  \r\n                   if(isNaN(input[i].amount)){\r\n                   continue;\r\n                    }\r\n                     total += Number(input[i].amount);\r\n                  }\r\n                return total;\r\n               }"]},"metadata":{},"sourceType":"module"}